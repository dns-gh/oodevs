<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<mission-sheet name="COMMON - Move using an underground network">
  <context>
    <line>
      <italic>
        <text>To move to an objective using an underground network such as a sewer, metro...</text>
      </italic>
    </line>
    <line>
      <text>In Sword moving through a given underground network is simulated with a period of time (the movement is not a visible behavior). This action is specific: to simulate the movement, the agent goes from one underground network gateway  (a Sword object) to another one within a certain time limit. Once the limit is over, the agent teleports itself to the exit gateway. </text>
    </line>
  </context>
  <parameters>
    <parameter name="Danger direction" optional="false">
      <line>
        <text>Expected enemy direction.</text>
      </line>
    </parameter>
    <parameter name="Phase lines" optional="true">
      <line>
        <text>Lines used by units to adapt their behavior when they reach or cross them.</text>
      </line>
    </parameter>
    <parameter name="Limit 1" optional="true">
      <line>
        <text>Right or left boundaries inside which the agent performs the mission.</text>
      </line>
    </parameter>
    <parameter name="Limit 2" optional="true">
      <line>
        <text>Right or left boundaries inside which the agent performs the mission.</text>
      </line>
    </parameter>
    <parameter name="Underground entrance" optional="false">
      <line>
        <text>Entrance to the underground network.</text>
      </line>
    </parameter>
    <parameter name="Underground exit" optional="false">
      <line>
        <text>Exit from the underground.</text>
      </line>
    </parameter>
    <parameter name="Objective" optional="false">
      <line>
        <text>Final objective to reach.</text>
      </line>
    </parameter>
  </parameters>
  <behavior>
    <ul>
      <li>
        <line>
          <text>The agent moves toward the given underground entrance. If it is not reachable (the object is located inside an urban block within which the agent cannot move), the agent moves as close as possible. Average speed depends on the physical capabilities while taking into account terrain properties.</text>
        </line>
      </li>
      <li>
        <line>
          <text>Upon reaching the underground entrance, the agent dismounts (if needed) enters the network and starts to activate the "move through underground" action. While moving through the network, a report informing the user how much time the movement will take is displayed ("arrival in 20minute(s)" for instance). A specific drawing is also displayed on the agent's symbol (see screenshot below).</text>
        </line>
      </li>
      <li>
        <line>
          <text>Upon delay termination, the agent is automatically teleported onto the Underground exit object, gets outside and then moves (normal movement) to the final objective.</text>
        </line>
      </li>
    </ul>
    <line>
      <link>
        <text>COMMON - Move using an underground network.png</text>
      </link>
    </line>
  </behavior>
  <specific-cases>
    <line>
      <text>The agent won't be able to move through the underground network if:</text>
    </line>
    <ul>
      <li>
        <line>
          <text>the agent is a mounted agent and if it cannot dismount (the vehicle cannot go through the underground network): the message "the agent cannot use underground network because it cannot dismount" should display. In this case, the mission terminates with a 'failed' status.</text>
        </line>
      </li>
      <li>
        <line>
          <text>the underground entrance is not activated: in this case the agent waits for the entrance to be activated and displays the report "underground network issue is not operational (state inactivated) or the unit is already underground". If the entrance becomes activated (magic frag order on the object for instance) the missions can be performed normally. </text>
        </line>
      </li>
    </ul>
    <line>
      <text>While moving through an underground network, the agent won't be able to EXIT if:</text>
    </line>
    <ul>
      <li>
        <line>
          <text>the underground exit is deactivated. In this case the agent waits for the exit to be activated. Once it is done (with a magic frag order on the object for instance) the agents gets out and finishes the mission in a normal way.</text>
        </line>
      </li>
      <li>
        <line>
          <text>all the gateways of the network are destroyed (the objects disappear): in this case the agent is TRAPPED underground and the mission failed. To get the agent out a new object belonging to the native network should be contructed and issued  as parameter for a new "exit from underground network" mission.</text>
        </line>
      </li>
    </ul>
  </specific-cases>
  <comments/>
  <mission-end>
    <line>
      <text>The mission ends once the objective is reached. </text>
    </line>
  </mission-end>
  <attachments>
    <attachment name="COMMON - Move using an underground network.png"/>
  </attachments>
</mission-sheet>
