pragma "once"

include "DEC_GetMission.bms"

node 'BEH_Defaut'
{
    eventmanager_plugin_tag = "Mission",
}

node 'missionBehavior'
{
    activate = function( self )
        DEC_TestBehaviorCalled( "missionBehavior called" )
    end
}

node 'missionBehaviorWithArg'
{
    activate = function( self )
        DEC_TestMissionCalled( self.params.mission )
    end
}

local pionTest =
{
    eventmanager_plugin = 
    {
        BEH_Defaut = {},
        missionBehavior = { "mission" },
        missionBehaviorWithArg = { "mission" },
    },
}
local dummyClass = setmetatable( { "dummyClass" }, { __persist = function() end } )
kBase.createKnowledgeImplementation { className = dummyClass }
kBase:registerRole( kBase.create( dummyClass, {} ) )
kBase.me.body = kBase.create( dummyClass, {} )
brain "name" ( pionTest )

behavior_model = {}
behavior_model.startTask = StartEvent
behavior_model.stopTask = StopEvents
