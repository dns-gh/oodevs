includedFiles = includedFiles or {}
includedFiles["sources/humus/humus_common/automates/functions/Functions - Conduite.bms"] = true

local emptyTable = emptyTable

include "bit.lua"

--[[// *****************************************************************************
]]--[[// Fonctions Communes aux pions
]]--[[// Thème : Ennemis
]]--[[// *****************************************************************************
]]--[[// ----------------------------------------------------------------------------
]]--[[// Renvoie le nombre de pions (parmis ceux passé en paramètre) étant en phase
]]--[[// de mission passée en paramètre
]]--[[// ----------------------------------------------------------------------------
]]--[[// ----------------------------------------------------------------------------
]]--[[// Renvoie le nombre de pions (parmis ceux passé en paramètre) dont l'état lima 
]]--[[// correspond à celui passé en parmètre
]]--[[// ----------------------------------------------------------------------------
]]--[[// ----------------------------------------------------------------------------
]]--[[// Renvoie vrai si l'automate est en difficulté (Cf. pour CR et Coup Arret ABC)
]]--[[// ----------------------------------------------------------------------------
]]--[[// Sinon plus de pions de PE en "continu"
]]function S_Conduite_Pions_EtatMission( sPions, eEtatPhase_Mission )
    local _returnValue = 0
    _returnValue = 0
    for _,x in pairs( sPions or emptyTable ) do
    local _continue = true
do
            local pion = x
            if( F_Pion_GeteEtatPhaseMission( pion ) == eEtatPhase_Mission ) then
                                _returnValue = _returnValue + 1
            end

        end

    end

    do return _returnValue end
end

function S_Conduite_Pions_EtatLima( sPions, eEtatLima )
    local _returnValue = 0
    _returnValue = 0
    for _,x in pairs( sPions or emptyTable ) do
    local _continue = true
do
            local pion = x
            if( F_Pion_GeteEtatLima( pion ) == eEtatLima ) then
                                _returnValue = _returnValue + 1
            end

        end

    end

    do return _returnValue end
end

function S_Automate_EstEnDifficulte( )
    local _returnValue = false
    _returnValue = false
    local listePionsPE = S_ObtenirTousPionsDe( eEtatEchelon_Premier )
    for _,x in pairs( listePionsPE or emptyTable ) do
    local _continue = true
do
            local pion = x
            if( F_Pion_GeteEtatDec( pion ) == eEtatDec_Continu or F_Pion_GeteEtatDec( pion ) == eEtatDec_RAS ) then
                do
                    _returnValue = false
                                        do return _returnValue end

                end
            end

            _returnValue = true
        end

    end

    do return _returnValue end
end

