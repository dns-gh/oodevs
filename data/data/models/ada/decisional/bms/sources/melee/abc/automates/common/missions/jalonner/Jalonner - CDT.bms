includedFiles = includedFiles or {}
includedFiles["sources/melee/abc/automates/common/missions/jalonner/Jalonner - CDT.bms"] = true

include "bit.lua"


--[[// *****************************************************************************
]]--[[// BEH_Conduite_Automate_ABC_Jalonner
]]--[[//
]]--[[// Commentaires:
]]--[[//
]]--[[// *****************************************************************************
]]node "BEH_Conduite_Automate_ABC_Jalonner"
{
    activations =
    {
        { "BEH_Dispositif_Automate_ABC_GererLeDispositifRetrograde_", { "onHalt" } },
        { "BEH_CoordDep_Automate_ABC_CoordinationRetrograde_", { "onHalt" } },
        { "BEH_Conduite_ABC_Automate_Jalonner_GererLesLC", { "onHalt" } },
    },

    onHalt = OnHalt,

    feedbacks = { { { "onHalt" }, "BEH_Conduite_Automate_ABC_Jalonner" } },

    create = function( self )
    end,

    activate = function( self )
        Activate( self.activations.BEH_Dispositif_Automate_ABC_GererLeDispositifRetrograde_, 1, {} )--[[//-----------------------------------------------------------------------------
]]--[[// Mission
]]--[[//-----------------------------------------------------------------------------
]]
        Activate( self.activations.BEH_CoordDep_Automate_ABC_CoordinationRetrograde_, 1, {} )--[[//-----------------------------------------------------------------------------
]]--[[// Coordination
]]--[[//-----------------------------------------------------------------------------
]]
        Activate( self.activations.BEH_Conduite_ABC_Automate_Jalonner_GererLesLC, 1, {} )--[[// Temp ADA
]]
    end,

--[[// *****************************************************************************
]]--[[// BEH_Conduite_ABC_Automate_Jalonner_GererLesLC
]]--[[//
]]--[[// Commentaires: TEMP //// RAJOUT ADA
]]--[[//
]]--[[// *****************************************************************************
]]}

node "BEH_Conduite_ABC_Automate_Jalonner_GererLesLC"
{
    activations =
    {
        { "ACT_Ordre_Automate_PasserSurLC", { "onHalt" } },
    },

    onHalt = OnHalt,

    feedbacks = { { { "onHalt" }, "BEH_Conduite_ABC_Automate_Jalonner_GererLesLC" } },

    create = function( self )
    end,

    activate = function( self )
        local selPionsFr = S_Cherche_Automate_Filtre_TypeMission( DEC_Automate_PionsAvecPC(), "T_Mission_Pion_ABC_Jalonner" )
        if( DEC_AutomateSuperieur_EstEmbraye() and F_Automat_GeteEtatEchelon( myself ) ~= eEtatEchelon_Premier ) then
for _,pion in pairs( selPionsFr ) do
            local _continue = true
                Activate( self.activations.ACT_Ordre_Automate_PasserSurLC, 1, { pion, } )

            end
        end

    end,

}

connections = connections or {}
connections[ #connections + 1 ] = { nodes.BEH_Conduite_ABC_Automate_Jalonner_GererLesLC, "ACT_Ordre_Automate_PasserSurLC", nodes.ACT_Ordre_Automate_PasserSurLC }
connections[ #connections + 1 ] = { nodes.BEH_Conduite_Automate_ABC_Jalonner, "BEH_Dispositif_Automate_ABC_GererLeDispositifRetrograde_", nodes.BEH_Dispositif_Automate_ABC_GererLeDispositifRetrograde_ }
connections[ #connections + 1 ] = { nodes.BEH_Conduite_Automate_ABC_Jalonner, "BEH_CoordDep_Automate_ABC_CoordinationRetrograde_", nodes.BEH_CoordDep_Automate_ABC_CoordinationRetrograde_ }
connections[ #connections + 1 ] = { nodes.BEH_Conduite_Automate_ABC_Jalonner, "BEH_Conduite_ABC_Automate_Jalonner_GererLesLC", nodes.BEH_Conduite_ABC_Automate_Jalonner_GererLesLC }
