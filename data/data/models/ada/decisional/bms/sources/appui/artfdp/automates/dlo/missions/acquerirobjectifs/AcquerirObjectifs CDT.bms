includedFiles = includedFiles or {}
includedFiles["sources/appui/artfdp/automates/dlo/missions/acquerirobjectifs/AcquerirObjectifs CDT.bms"] = true

--[[// *****************************************************************************
]]--[[// MIS_Automate_CDT_ASS_AcquerirObjectifsDLO
]]--[[//
]]--[[// Commentaires: ajout MIA ADA
]]--[[//
]]--[[// *****************************************************************************
]]node "MIS_Automate_CDT_ASS_AcquerirObjectifsDLO"
{
    activations =
    {
        { "BEH_Mission_Automate_AssignerSuivreA", { "onHalt" } },
    },

    onHalt = OnHalt,

    feedbacks = { { { "onHalt" }, "MIS_Automate_CDT_ASS_AcquerirObjectifsDLO" } },

    create = function( self )
        self._namedParams = {}
        self._namedParams.mission = self.params.mission
    end,

    activate = function( self )
        --[[//-----------------------------------------------------------------------------
]]--[[// Init
]]--[[//-----------------------------------------------------------------------------
]]if( ModuleBegins() ) then
            do
                DEC_Trace( "$ MIS_Automate_CDT_ASS_AcquerirObjectifsDLO starting $" )
                DEC_SetMission( myself, self._namedParams.mission )
            end
--[[//-----------------------------------------------------------------------------
]]--[[// DLO
]]--[[//-----------------------------------------------------------------------------
]]        end

        if( self._namedParams.mission.bMarcheRetrograde_ ) then
            do
                local listePions = DEC_Automate_PionsDeAutomateAvecPC( DIA_GetAt( self._namedParams.mission.compagniesAAppuyer_, 0 ) )
                local listePionsSE = S_Cherche_Automate_Filtre_PionEchelon( listePions, eEtatEchelon_Second )
                if( not DIA_IsListEmpty( listePionsSE ) ) then
                    Activate( self.activations.BEH_Mission_Automate_AssignerSuivreA, 1, { ePhase_CDT, DEC_Automate_PionPC(), DIA_GetAt( listePionsSE, 0 ), } )
                end

            end
--[[// Mission suivre du PC
]]        else
do
                local listePionPE = S_ObtenirPionsDe( eEtatEchelon_Premier, eEtatDestruction_None )
                if( not DIA_IsListEmpty( listePionPE ) ) then
                    Activate( self.activations.BEH_Mission_Automate_AssignerSuivreA, 1, { ePhase_CDT, DEC_Automate_PionPC(), DIA_GetAt( listePionPE, 0 ), } )
                end

            end
        end

    end,

}

eventmanager_plugin = eventmanager_plugin or {}
eventmanager_plugin.MIS_Automate_CDT_ASS_AcquerirObjectifsDLO = { "mission" }
connections = connections or {}
connections[ #connections + 1 ] = { nodes.MIS_Automate_CDT_ASS_AcquerirObjectifsDLO, "BEH_Mission_Automate_AssignerSuivreA", nodes.BEH_Mission_Automate_AssignerSuivreA }
