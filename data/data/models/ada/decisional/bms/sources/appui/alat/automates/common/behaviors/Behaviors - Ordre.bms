includedFiles = includedFiles or {}
includedFiles["sources/appui/alat/automates/common/behaviors/Behaviors - Ordre.bms"] = true

local emptyTable = emptyTable

--[[// *****************************************************************************
]]--[[// BEH_Ordre_Automate_RecevoirOrdreInopine
]]--[[//
]]--[[// Commentaires: recevoir un ordre inopine de l'anibas
]]--[[//
]]--[[// *****************************************************************************
]]node "ACT_Ordre_Automate_ALAT_ChangerParametresRecompletement"
{
    feedbacks = { { { "done_ACT_Ordre_Automate_ALAT_ChangerParametresRecompletement" }, "ACT_Ordre_Automate_ALAT_ChangerParametresRecompletement" } },
    SendFeedback = function( self, value ) Feedback( self.feedbacks.done_ACT_Ordre_Automate_ALAT_ChangerParametresRecompletement, {value} ) end,
    create = function( self )
        self._namedParams = {}
        self._namedParams.pion = self.params[1]
        self._namedParams.porteeAction = self.params[2]
        self._namedParams.ambianceMission = self.params[3]
    end,

    select = function( self )
        if( S_EstPatrouilleALAT( self._namedParams.pion ) ) then
            do
                local patrouilleALAT = self._namedParams.pion
                patrouilleALAT:SetporteeAction_( self._namedParams.porteeAction )
                patrouilleALAT:SetambianceMission_( self._namedParams.ambianceMission )
            end
        end

    end,

}

node "BEH_Ordre_Automate_ALAT_ChangerParametresRecompletement"
{
    feedbacks = { { { "done_BEH_Ordre_Automate_ALAT_ChangerParametresRecompletement" }, "BEH_Ordre_Automate_ALAT_ChangerParametresRecompletement" } },
    SendFeedback = function( self, value ) Feedback( self.feedbacks.done_BEH_Ordre_Automate_ALAT_ChangerParametresRecompletement, {value} ) end,
    activations =
    {
        { "BEH_Ordre_Automate_ALAT_ChangerParametresRecompletementPions", { "done_BEH_Ordre_Automate_ALAT_ChangerParametresRecompletementPions" } },
        { "ACT_Ordre_Suppression", { "done_ACT_Ordre_Suppression" } },
    },

    create = function( self )
    end,

    activate = function( self )
        local Activate = Activate
        local ordres_recus = DEC_GetCategory( "ordres_recus" )
        for _,x in pairs( ordres_recus or emptyTable ) do
        local _continue = true
do
                local repOrdre = x
                if( repOrdre:GetType() == "Rep_OrderConduite_ChangerParametresRecompletementALAT" ) then
                    do
                        local ordreParametersRecompletement = repOrdre
                        Activate( self.activations.BEH_Ordre_Automate_ALAT_ChangerParametresRecompletementPions, 1, { ordreParametersRecompletement:GetporteeAction_(), ordreParametersRecompletement:GetambianceMission_(), } )
                    end
                end

                Activate( self.activations.ACT_Ordre_Suppression, 1, { x, } )
            end

        end

    end,

}

node "BEH_Ordre_Automate_ALAT_ChangerParametresRecompletementPions"
{
    feedbacks = { { { "done_BEH_Ordre_Automate_ALAT_ChangerParametresRecompletementPions" }, "BEH_Ordre_Automate_ALAT_ChangerParametresRecompletementPions" } },
    SendFeedback = function( self, value ) Feedback( self.feedbacks.done_BEH_Ordre_Automate_ALAT_ChangerParametresRecompletementPions, {value} ) end,
    activations =
    {
        { "ACT_Ordre_Automate_ALAT_ChangerParametresRecompletement", { "done_ACT_Ordre_Automate_ALAT_ChangerParametresRecompletement" } },
    },

    create = function( self )
        self._namedParams = {}
        self._namedParams.porteeAction = self.params[1]
        self._namedParams.ambianceMission = self.params[2]
    end,

    activate = function( self )
        local Activate = Activate
        local listePions = DEC_Automate_PionsAvecPC()
        for _,x in pairs( S_ListePionsALAT( listePions ) or emptyTable ) do
        local _continue = true
            Activate( self.activations.ACT_Ordre_Automate_ALAT_ChangerParametresRecompletement, 1, { x, self._namedParams.porteeAction, self._namedParams.ambianceMission, } )

        end

    end,

}

connections = connections or {}
connections[ #connections + 1 ] = { nodes.BEH_Ordre_Automate_ALAT_ChangerParametresRecompletement, "BEH_Ordre_Automate_ALAT_ChangerParametresRecompletementPions", nodes.BEH_Ordre_Automate_ALAT_ChangerParametresRecompletementPions }
connections[ #connections + 1 ] = { nodes.BEH_Ordre_Automate_ALAT_ChangerParametresRecompletement, "ACT_Ordre_Suppression", nodes.ACT_Ordre_Suppression }
connections[ #connections + 1 ] = { nodes.BEH_Ordre_Automate_ALAT_ChangerParametresRecompletementPions, "ACT_Ordre_Automate_ALAT_ChangerParametresRecompletement", nodes.ACT_Ordre_Automate_ALAT_ChangerParametresRecompletement }
