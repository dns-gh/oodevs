includedFiles = includedFiles or {}
includedFiles["sources/glaise/glaise_common/automates/behaviors/Behaviors - Rens.bms"] = true

local emptyTable = emptyTable

--[[// *****************************************************************************
]]--[[// BEH_Rens_Automate_GererSilenceRadio()
]]--[[//
]]--[[// Commentaires :
]]--[[//
]]--[[// *****************************************************************************
]]node "BEH_Rens_Automate_GererSilenceRadio"
{
    feedbacks = { { { "done_BEH_Rens_Automate_GererSilenceRadio" }, "BEH_Rens_Automate_GererSilenceRadio" } },
    SendFeedback = function( self, value ) Feedback( self.feedbacks.done_BEH_Rens_Automate_GererSilenceRadio, {value} ) end,
    activations =
    {
        { "BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadio", { "done_BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadio" } },
    },

    create = function( self )
    end,

    activate = function( self )
        local Activate = Activate
        Activate( self.activations.BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadio, 1, emptyTable )--[[// Eventuellement d'autre comportements...
]]--[[//-----------------------------------------------------------------------------
]]--[[// Gestion de l'ordre de conduite
]]--[[//-----------------------------------------------------------------------------
]]
    end,

--[[// *****************************************************************************
]]--[[// BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadio()
]]--[[//
]]--[[// Commentaires :
]]--[[//                MIA: ATTENTION --> La gestion des ordres a été implémenté de cette 
]]--[[//                manière (systeme start/stop ) pour gerer le fait de rajouter
]]--[[//                un pion en dynamique dans l'automate: celui passera en silence radio 
]]--[[//                ou pas suivant l'état de l'automate.
]]--[[//
]]--[[// *****************************************************************************
]]}

node "BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadio"
{
    feedbacks = { { { "done_BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadio" }, "BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadio" } },
    SendFeedback = function( self, value ) Feedback( self.feedbacks.done_BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadio, {value} ) end,
    activations =
    {
        { "BEH_Ordre_Automate_ConduitePasserEnSilenceRadio", { "done_BEH_Ordre_Automate_ConduitePasserEnSilenceRadio" } },
        { "BEH_Ordre_Automate_ConduiteFinSilenceRadio", { "done_BEH_Ordre_Automate_ConduiteFinSilenceRadio" } },
        { "BEH_Ordre_Automate_BEH_Ordre_Automate_ConduitePasserEnSilenceRadioPartiel", { "done_BEH_Ordre_Automate_BEH_Ordre_Automate_ConduitePasserEnSilenceRadioPartiel" } },
        { "ACT_Ordre_Suppression", { "done_ACT_Ordre_Suppression" } },
    },

    create = function( self )
    end,

    activate = function( self )
        local Activate = Activate
        --[[//-----------------------------------------------------------------------------
]]--[[// Recevoir un ordre
]]--[[//-----------------------------------------------------------------------------
]]local ordres_recus = DEC_GetCategory( "ordres_recus" )
        for _,x in pairs( ordres_recus or emptyTable ) do
        local _continue = true
do
                local ordre = x
                local repOrdre = ordre
                local bEstUtilise = true
                 do
                    local _continue = true
--[[//-----------------------------------------------------------------------------
]]--[[// Sinon...
]]--[[//-----------------------------------------------------------------------------
]]                    local switch_1 = repOrdre:GetType()
                        if switch_1 == "Rep_OrderConduite_PasserEnSilenceRadio" then
                            DEC_Trace( "$ --- ORDRE Passer en Silence Radio ---$" )
                            StartActivateOverride( self, self.activations.BEH_Ordre_Automate_ConduitePasserEnSilenceRadio, 1, emptyTable )
                            StopActivateOverride( self, self.activations.BEH_Ordre_Automate_ConduiteFinSilenceRadio, emptyTable )
                            StopActivateOverride( self, self.activations.BEH_Ordre_Automate_BEH_Ordre_Automate_ConduitePasserEnSilenceRadioPartiel, emptyTable )
                            _continue = false
                        elseif switch_1 == "Rep_OrderConduite_ArreterSilenceRadio" then
                            DEC_Trace( "$ --- ORDRE Autoriser Emissions Radio ---$" )
                            StopActivateOverride( self, self.activations.BEH_Ordre_Automate_ConduitePasserEnSilenceRadio, emptyTable )
                            StartActivateOverride( self, self.activations.BEH_Ordre_Automate_ConduiteFinSilenceRadio, 1, emptyTable )
                            _continue = false
                        
                        else
                            bEstUtilise = false
                            _continue = false
                                                end
                    end

                if( bEstUtilise ) then
                    do
                        --[[// on a finit de traiter l'ordre, on le supprime
]]Activate( self.activations.ACT_Ordre_Suppression, 1, { ordre, } )
                    end
                end

            end

        end

    end,

--[[// *****************************************************************************
]]--[[// BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadar()
]]--[[//
]]--[[// Commentaires :
]]--[[//
]]--[[// *****************************************************************************
]]}

node "BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadar"
{
    feedbacks = { { { "done_BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadar" }, "BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadar" } },
    SendFeedback = function( self, value ) Feedback( self.feedbacks.done_BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadar, {value} ) end,
    activations =
    {
        { "BEH_Ordre_Automate_ConduitePasserEnSilenceRadar", { "done_BEH_Ordre_Automate_ConduitePasserEnSilenceRadar" } },
        { "BEH_Ordre_Automate_ConduiteFinSilenceRadar", { "done_BEH_Ordre_Automate_ConduiteFinSilenceRadar" } },
        { "ACT_Ordre_Suppression", { "done_ACT_Ordre_Suppression" } },
    },

    create = function( self )
    end,

    activate = function( self )
        local Activate = Activate
        --[[//-----------------------------------------------------------------------------
]]--[[// Recevoir un ordre
]]--[[//-----------------------------------------------------------------------------
]]local ordres_recus = DEC_GetCategory( "ordres_recus" )
        for _,x in pairs( ordres_recus or emptyTable ) do
        local _continue = true
do
                local ordre = x
                local repOrdre = ordre
                local bEstUtilise = true
                 do
                    local _continue = true
--[[//-----------------------------------------------------------------------------
]]--[[// Sinon...
]]--[[//-----------------------------------------------------------------------------
]]                    local switch_1 = repOrdre:GetType()
                        if switch_1 == "Rep_OrderConduite_PasserEnSilenceRadar" then
                            DEC_Trace( "$ --- ORDRE Passer en Silence Radio ---$" )
                            StartActivateOverride( self, self.activations.BEH_Ordre_Automate_ConduitePasserEnSilenceRadar, 1, emptyTable )
                            StopActivateOverride( self, self.activations.BEH_Ordre_Automate_ConduiteFinSilenceRadar, emptyTable )
                            _continue = false
                        elseif switch_1 == "Rep_OrderConduite_ArreterSilenceRadar" then
                            DEC_Trace( "$ --- ORDRE Autoriser Emissions Radio ---$" )
                            StopActivateOverride( self, self.activations.BEH_Ordre_Automate_ConduitePasserEnSilenceRadar, emptyTable )
                            StartActivateOverride( self, self.activations.BEH_Ordre_Automate_ConduiteFinSilenceRadar, 1, emptyTable )
                            _continue = false
                        
                        else
                            bEstUtilise = false
                            _continue = false
                                                end
                    end

                if( bEstUtilise ) then
                    do
                        --[[// on a finit de traiter l'ordre, on le supprime
]]Activate( self.activations.ACT_Ordre_Suppression, 1, { ordre, } )
                    end
                end

            end

        end

    end,

--[[// *****************************************************************************
]]--[[// BEH_Ordre_Automate_ConduitePasserEnSilenceRadio()
]]--[[//
]]--[[// Commentaires :
]]--[[// 
]]--[[// *****************************************************************************
]]}

node "BEH_Ordre_Automate_ConduitePasserEnSilenceRadio"
{
    feedbacks = { { { "done_BEH_Ordre_Automate_ConduitePasserEnSilenceRadio" }, "BEH_Ordre_Automate_ConduitePasserEnSilenceRadio" } },
    SendFeedback = function( self, value ) Feedback( self.feedbacks.done_BEH_Ordre_Automate_ConduitePasserEnSilenceRadio, {value} ) end,
    activations =
    {
        { "ACT_Ordre_PasserEnSilenceRadio", { "done_ACT_Ordre_PasserEnSilenceRadio" } },
    },

    create = function( self )
    end,

    activate = function( self )
        local Activate = Activate
        --[[//-----------------------------------------------------------------------------
]]--[[// RC
]]--[[//-----------------------------------------------------------------------------
]]--[[// GGR : ajouter un RC
]]--[[//-----------------------------------------------------------------------------
]]--[[// Donner l'ordre aux pions si embrayé
]]--[[//-----------------------------------------------------------------------------
]]local listePionsSubordonnes = DEC_Automate_PionsAvecPC()
        for _,x in pairs( listePionsSubordonnes or emptyTable ) do
        local _continue = true
do
                local pion = x
                Activate( self.activations.ACT_Ordre_PasserEnSilenceRadio, 1, { pion, } )
            end

        end

    end,

--[[// *****************************************************************************
]]--[[// BEH_Ordre_Automate_ConduitePasserEnSilenceRadio()
]]--[[//
]]--[[// Commentaires : on donne juste l'ordre au pion de se vetir de leur tenue NBC
]]--[[// 
]]--[[// *****************************************************************************
]]}

node "BEH_Ordre_Automate_ConduiteFinSilenceRadio"
{
    feedbacks = { { { "done_BEH_Ordre_Automate_ConduiteFinSilenceRadio" }, "BEH_Ordre_Automate_ConduiteFinSilenceRadio" } },
    SendFeedback = function( self, value ) Feedback( self.feedbacks.done_BEH_Ordre_Automate_ConduiteFinSilenceRadio, {value} ) end,
    activations =
    {
        { "ACT_Ordre_FinSilenceRadio", { "done_ACT_Ordre_FinSilenceRadio" } },
    },

    create = function( self )
    end,

    activate = function( self )
        local Activate = Activate
        --[[//-----------------------------------------------------------------------------
]]--[[// Donner l'ordre aux pions si embrayé
]]--[[//-----------------------------------------------------------------------------
]]local listePionsSubordonnes = DEC_Automate_PionsAvecPC()
        for _,x in pairs( listePionsSubordonnes or emptyTable ) do
        local _continue = true
do
                local pion = x
                Activate( self.activations.ACT_Ordre_FinSilenceRadio, 1, { pion, } )
            end

        end

    end,

--[[// *****************************************************************************
]]--[[// ACT_Ordre_PasserEnSilenceRadio
]]--[[//
]]--[[// Commentaires : 
]]--[[// 
]]--[[// *****************************************************************************
]]}

node "ACT_Ordre_PasserEnSilenceRadio"
{
    feedbacks = { { { "done_ACT_Ordre_PasserEnSilenceRadio" }, "ACT_Ordre_PasserEnSilenceRadio" } },
    SendFeedback = function( self, value ) Feedback( self.feedbacks.done_ACT_Ordre_PasserEnSilenceRadio, {value} ) end,
    create = function( self )
        self._namedParams = {}
        self._namedParams.pion = self.params[1]
    end,

    select = function( self )
                if( ModuleBegins() ) then
            self._namedParams.pion:SetStateVariable( "VE_SilenceRadio", 4 )
        end

    end,

    deselect = function( self )
            end,

}

--[[// *****************************************************************************
]]--[[// ACT_Ordre_FinSilenceRadio
]]--[[//
]]--[[// Commentaires : 
]]--[[// 
]]--[[// *****************************************************************************
]]node "ACT_Ordre_FinSilenceRadio"
{
    feedbacks = { { { "done_ACT_Ordre_FinSilenceRadio" }, "ACT_Ordre_FinSilenceRadio" } },
    SendFeedback = function( self, value ) Feedback( self.feedbacks.done_ACT_Ordre_FinSilenceRadio, {value} ) end,
    create = function( self )
        self._namedParams = {}
        self._namedParams.pion = self.params[1]
    end,

    select = function( self )
                if( ModuleBegins() ) then
            self._namedParams.pion:SetStateVariable( "VE_SilenceRadio", 0 )
        end

    end,

    deselect = function( self )
            end,

}

--[[// *****************************************************************************
]]--[[// BEH_Ordre_Automate_ConduitePasserEnSilenceRadar()
]]--[[//
]]--[[// Commentaires :
]]--[[// 
]]--[[// *****************************************************************************
]]node "BEH_Ordre_Automate_ConduitePasserEnSilenceRadar"
{
    feedbacks = { { { "done_BEH_Ordre_Automate_ConduitePasserEnSilenceRadar" }, "BEH_Ordre_Automate_ConduitePasserEnSilenceRadar" } },
    SendFeedback = function( self, value ) Feedback( self.feedbacks.done_BEH_Ordre_Automate_ConduitePasserEnSilenceRadar, {value} ) end,
    activations =
    {
        { "ACT_Ordre_PasserEnSilenceRadar", { "done_ACT_Ordre_PasserEnSilenceRadar" } },
    },

    create = function( self )
    end,

    activate = function( self )
        local Activate = Activate
        --[[//-----------------------------------------------------------------------------
]]--[[// RC
]]--[[//-----------------------------------------------------------------------------
]]--[[// GGR : ajouter un RC
]]--[[//-----------------------------------------------------------------------------
]]--[[// Donner l'ordre aux pions si embrayé
]]--[[//-----------------------------------------------------------------------------
]]local listePionsSubordonnes = DEC_Automate_PionsAvecPC()
        for _,x in pairs( listePionsSubordonnes or emptyTable ) do
        local _continue = true
do
                local pion = x
                Activate( self.activations.ACT_Ordre_PasserEnSilenceRadar, 1, { pion, } )
            end

        end

    end,

--[[// *****************************************************************************
]]--[[// BEH_Ordre_Automate_ConduitePasserEnSilenceRadar()
]]--[[//
]]--[[// 
]]--[[// *****************************************************************************
]]}

node "BEH_Ordre_Automate_ConduiteFinSilenceRadar"
{
    feedbacks = { { { "done_BEH_Ordre_Automate_ConduiteFinSilenceRadar" }, "BEH_Ordre_Automate_ConduiteFinSilenceRadar" } },
    SendFeedback = function( self, value ) Feedback( self.feedbacks.done_BEH_Ordre_Automate_ConduiteFinSilenceRadar, {value} ) end,
    activations =
    {
        { "ACT_Ordre_FinSilenceRadar", { "done_ACT_Ordre_FinSilenceRadar" } },
    },

    create = function( self )
    end,

    activate = function( self )
        local Activate = Activate
        --[[//-----------------------------------------------------------------------------
]]--[[// Donner l'ordre aux pions si embrayé
]]--[[//-----------------------------------------------------------------------------
]]local listePionsSubordonnes = DEC_Automate_PionsAvecPC()
        for _,x in pairs( listePionsSubordonnes or emptyTable ) do
        local _continue = true
do
                local pion = x
                Activate( self.activations.ACT_Ordre_FinSilenceRadar, 1, { pion, } )
            end

        end

    end,

--[[// *****************************************************************************
]]--[[// ACT_Ordre_FinSilenceRadar
]]--[[//
]]--[[// Commentaires : 
]]--[[// 
]]--[[// *****************************************************************************
]]}

node "ACT_Ordre_FinSilenceRadar"
{
    feedbacks = { { { "done_ACT_Ordre_FinSilenceRadar" }, "ACT_Ordre_FinSilenceRadar" } },
    SendFeedback = function( self, value ) Feedback( self.feedbacks.done_ACT_Ordre_FinSilenceRadar, {value} ) end,
    create = function( self )
        self._namedParams = {}
        self._namedParams.pion = self.params[1]
    end,

    select = function( self )
                if( ModuleBegins() ) then
            self._namedParams.pion:SetStateVariable( "VE_SilenceRadar", 0 )
        end

    end,

    deselect = function( self )
            end,

}

--[[// *****************************************************************************
]]--[[// ACT_Ordre_PasserEnSilenceRadar
]]--[[//
]]--[[// Commentaires : 
]]--[[// 
]]--[[// *****************************************************************************
]]node "ACT_Ordre_PasserEnSilenceRadar"
{
    feedbacks = { { { "done_ACT_Ordre_PasserEnSilenceRadar" }, "ACT_Ordre_PasserEnSilenceRadar" } },
    SendFeedback = function( self, value ) Feedback( self.feedbacks.done_ACT_Ordre_PasserEnSilenceRadar, {value} ) end,
    create = function( self )
        self._namedParams = {}
        self._namedParams.pion = self.params[1]
    end,

    select = function( self )
                if( ModuleBegins() ) then
            self._namedParams.pion:SetStateVariable( "VE_SilenceRadar", 4 )
        end

    end,

    deselect = function( self )
            end,

}

connections = connections or {}
connections[ #connections + 1 ] = { nodes.BEH_Ordre_Automate_ConduiteFinSilenceRadar, "ACT_Ordre_FinSilenceRadar", nodes.ACT_Ordre_FinSilenceRadar }
connections[ #connections + 1 ] = { nodes.BEH_Ordre_Automate_ConduiteFinSilenceRadio, "ACT_Ordre_FinSilenceRadio", nodes.ACT_Ordre_FinSilenceRadio }
connections[ #connections + 1 ] = { nodes.BEH_Ordre_Automate_ConduitePasserEnSilenceRadar, "ACT_Ordre_PasserEnSilenceRadar", nodes.ACT_Ordre_PasserEnSilenceRadar }
connections[ #connections + 1 ] = { nodes.BEH_Ordre_Automate_ConduitePasserEnSilenceRadio, "ACT_Ordre_PasserEnSilenceRadio", nodes.ACT_Ordre_PasserEnSilenceRadio }
connections[ #connections + 1 ] = { nodes.BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadar, "BEH_Ordre_Automate_ConduitePasserEnSilenceRadar", nodes.BEH_Ordre_Automate_ConduitePasserEnSilenceRadar }
connections[ #connections + 1 ] = { nodes.BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadar, "BEH_Ordre_Automate_ConduiteFinSilenceRadar", nodes.BEH_Ordre_Automate_ConduiteFinSilenceRadar }
connections[ #connections + 1 ] = { nodes.BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadar, "ACT_Ordre_Suppression", nodes.ACT_Ordre_Suppression }
connections[ #connections + 1 ] = { nodes.BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadio, "BEH_Ordre_Automate_ConduitePasserEnSilenceRadio", nodes.BEH_Ordre_Automate_ConduitePasserEnSilenceRadio }
connections[ #connections + 1 ] = { nodes.BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadio, "BEH_Ordre_Automate_ConduiteFinSilenceRadio", nodes.BEH_Ordre_Automate_ConduiteFinSilenceRadio }
connections[ #connections + 1 ] = { nodes.BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadio, "BEH_Ordre_Automate_BEH_Ordre_Automate_ConduitePasserEnSilenceRadioPartiel", nodes.BEH_Ordre_Automate_BEH_Ordre_Automate_ConduitePasserEnSilenceRadioPartiel }
connections[ #connections + 1 ] = { nodes.BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadio, "ACT_Ordre_Suppression", nodes.ACT_Ordre_Suppression }
connections[ #connections + 1 ] = { nodes.BEH_Rens_Automate_GererSilenceRadio, "BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadio", nodes.BEH_Ordre_Automate_RecevoirOrdreSurSilenceRadio }
