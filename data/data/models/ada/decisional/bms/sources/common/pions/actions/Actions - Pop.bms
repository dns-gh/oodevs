includedFiles = includedFiles or {}
includedFiles["sources/common/pions/actions/Actions - Pop.bms"] = true


--[[// *****************************************************************************
]]--[[// ACT_Pion_RenseignerSurPop
]]--[[//
]]--[[// *****************************************************************************
]]node "ACT_Pion_RenseignerSurPop"
{
    feedbacks = { { { "onHalt" }, "ACT_Pion_RenseignerSurPop" } },

    create = function( self )
        self._namedParams = {}
        self._namedParams.pop = self.params[1]
    end,

    select = function( self )
        --[[//-----------------------------------------------------------------------------
]]--[[// Init
]]--[[//-----------------------------------------------------------------------------
]]if( ModuleBegins() ) then
            do
                DEC_ConnaissancePopulation_Reconnaitre( self._namedParams.pop )
                                do
                    if( not DEC_Agent_AutomateEstEmbraye() ) then
                        DEC_RC( eRC_PopulationReconnue )
                    else
                        DEC_Message( eRC_PopulationReconnue )
                    end

                end

            end
        end

    end,

}

--[[// *****************************************************************************
]]--[[// ACT_Pion_Securiser
]]--[[//
]]--[[// Commentaires:
]]--[[//
]]--[[// *****************************************************************************
]]node "ACT_Pion_Securiser"
{
    feedbacks = { { { "onHalt" }, "ACT_Pion_Securiser" } },

    create = function( self )
        self._namedParams = {}
        self._namedParams.pop = self.params[1]
    end,

    select = function( self )
        --[[//-----------------------------------------------------------------------------
]]--[[// Init
]]--[[//-----------------------------------------------------------------------------
]]        if( ModuleBegins() ) then
            do
                if( not DEC_Agent_AutomateEstEmbraye() ) then
                    DEC_RC( eRC_MiseEnPlaceControleDeFoule )
                else
                    DEC_Message( eRC_MiseEnPlaceControleDeFoule )
                end

            end
--[[//-----------------------------------------------------------------------------
]]--[[// Sécurisation
]]--[[//-----------------------------------------------------------------------------
]]        end

        DEC_ConnaissancePopulation_Securiser( self._namedParams.pop )
    end,

}

--[[// *****************************************************************************
]]--[[// ACT_Pion_Animer
]]--[[//
]]--[[// Commentaires:
]]--[[//
]]--[[// *****************************************************************************
]]node "ACT_Pion_Animer"
{
    actuators =
    {
        controlePopulation = 1,
    },

    feedbacks = { { { "onHalt" }, "ACT_Pion_Animer" } },

    create = function( self )
        self._namedParams = {}
        self._namedParams.posteControle = self.params[1]
        self._namedParams.permeabilite = self.params[2]
    end,

    select = function( self )
                self.actionAnimer = self.actionAnimer or nil
        self.bAnime = self.bAnime or true
        --[[//-----------------------------------------------------------------------------
]]--[[// Init
]]--[[//-----------------------------------------------------------------------------
]]if( ModuleBegins() ) then
            do
                                do
                    if( not DEC_Agent_AutomateEstEmbraye() ) then
                        DEC_RC( eRC_AnimationBarrage )
                    else
                        DEC_Message( eRC_AnimationBarrage )
                    end

                end

                self.actionAnimer = DEC__StartAnimerObjet( self._namedParams.posteControle )
            end
--[[//---------------------------------------------------------------------
]]--[[// Changer la densité de la pop
]]--[[//---------------------------------------------------------------------
]]        end

        DEC_ConnaisssanceObjet_ChangeDensitePopulationSortante( self._namedParams.posteControle, self._namedParams.permeabilite )
        --[[//---------------------------------------------------------------------
]]--[[// Reprise après focus loss
]]--[[//---------------------------------------------------------------------        
]]if( not self.bAnime ) then
            do
                DEC_ReprendAction( self.actionAnimer )
                self.bAnime = true
            end
        end

--[[// RC MIA: sinon crache
]]    end,

    deselect = function( self )
                DEC_Trace( "Pause animation du site" )
        DEC_PauseAction( self.actionAnimer )
        self.bAnime = false
        DEC_ConnaisssanceObjet_ResetDensitePopulationSortante( self._namedParams.posteControle )
    end,

    destroy = function( self )
                DEC_Trace( "Site non anime" )
        self.actionAnimer = DEC_StopAction( self.actionAnimer )
        DEC_ConnaisssanceObjet_ResetDensitePopulationSortante( self._namedParams.posteControle )
    end,

}

--[[// *****************************************************************************
]]--[[// ACT_Pion_CreerObjetSur
]]--[[//
]]--[[// Commentaires:
]]--[[//
]]--[[// *****************************************************************************
]]node "ACT_Pion_CreerObjetSur"
{
    feedbacks = { { { "onHalt" }, "ACT_Pion_CreerObjetSur" } },

    create = function( self )
        self._namedParams = {}
        self._namedParams.localisation = self.params[1]
        self._namedParams.type = self.params[2]
    end,

    select = function( self )
        --[[//-----------------------------------------------------------------------------
]]--[[// Init --> commencer à construire l'objet
]]--[[//-----------------------------------------------------------------------------
]]if( ModuleBegins() ) then
            DEC_CreerObjetSansDelais( S_TypeObject_ToString( self._namedParams.type ), self._namedParams.localisation )
        end

    end,

}

--[[// *****************************************************************************
]]--[[// ACT_Pion_FuirPopulations
]]--[[//
]]--[[// Commentaires:
]]--[[//
]]--[[// *****************************************************************************
]]node "ACT_Pion_FuirPopulations"
{
    actuators =
    {
        controlePopulation = 1,
    },

    feedbacks = { { { "onHalt" }, "ACT_Pion_FuirPopulations" } },

    create = function( self )
    end,

    select = function( self )
    end,

}

