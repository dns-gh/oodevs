includedFiles = includedFiles or {}
includedFiles["sources/emergency/automates/common/missions/Behaviors - Medo.bms"] = true

local emptyTable = emptyTable

--[[// *****************************************************************************
]]--[[//
]]--[[// This file is part of a MASA library or program.
]]--[[// Refer to the included end-user license agreement for restrictions.
]]--[[//
]]--[[// Copyright (c) 2007 Mathématiques Appliquées SA (MASA)
]]--[[//
]]--[[// *****************************************************************************
]]
include "Emergency/Automates/Common/Missions/Actions - Medo.bms"


--[[//=============================================================================
]]--[[// Mission : Evacuate Area
]]--[[//
]]--[[//=============================================================================
]]node "BEH_Mission_Automate_Emergency_AssignerA_EvacuateArea"
{
    feedbacks = { { { "done_BEH_Mission_Automate_Emergency_AssignerA_EvacuateArea" }, "BEH_Mission_Automate_Emergency_AssignerA_EvacuateArea" } },
    SendFeedback = function( self, value ) Feedback( self.feedbacks.done_BEH_Mission_Automate_Emergency_AssignerA_EvacuateArea, {value} ) end,
    activations =
    {
        { "ACT_Mission_Automate_ControleCreation_EnCours", { "done_ACT_Mission_Automate_ControleCreation_EnCours" } },
        { "ACT_Mission_Automate_ControleCreation_NOK", { "done_ACT_Mission_Automate_ControleCreation_NOK" } },
        { "ACT_Mission_Automate_ControleCreation_OK", { "done_ACT_Mission_Automate_ControleCreation_OK" } },
        { "ACT_Mission_Automate_Emergency_AssignerA_EvacuateArea", { "done_ACT_Mission_Automate_Emergency_AssignerA_EvacuateArea" } },
    },

    create = function( self )
        self._namedParams = {}
        self._namedParams.ePhase = self.params[1]
        self._namedParams.pPion = self.params[2]
        self._namedParams.locZone = self.params[3]
    end,

    activate = function( self )
        local Activate = Activate
        self.eActionCreation = self.eActionCreation or eActionEnCours
        local rForce = 1 / GetActivity()
         do
            local _continue = true
            local switch_1 = self.eActionCreation
            local cases_switch_1 = {}
                if switch_1 == eActionEnCours then
                    Activate( self.activations.ACT_Mission_Automate_ControleCreation_EnCours, rForce, emptyTable )
                    _continue = false
                                cases_switch_1[1] = true
elseif switch_1 == eActionHalt
                or switch_1 == eActionImpossible then
                    Activate( self.activations.ACT_Mission_Automate_ControleCreation_NOK, rForce, emptyTable )
                                        do return end

                                end
                if cases_switch_1[2] or switch_1 == eActionEffectuee then
                    Activate( self.activations.ACT_Mission_Automate_ControleCreation_OK, -rForce, emptyTable )
                                        do return end

                                end
            end

        Activate( self.activations.ACT_Mission_Automate_Emergency_AssignerA_EvacuateArea, rForce, { self._namedParams.ePhase, self._namedParams.pPion, self._namedParams.locZone, } )
self.done_ACT_Mission_Automate_Emergency_AssignerA_EvacuateArea = function( self, _, v ) self.eActionCreation = v[1] end
    end,

--[[//=============================================================================
]]--[[// Mission : Evacuate Area
]]--[[//
]]--[[//=============================================================================
]]}

node "BEH_Mission_Automate_Emergency_AssignerA_Alert"
{
    feedbacks = { { { "done_BEH_Mission_Automate_Emergency_AssignerA_Alert" }, "BEH_Mission_Automate_Emergency_AssignerA_Alert" } },
    SendFeedback = function( self, value ) Feedback( self.feedbacks.done_BEH_Mission_Automate_Emergency_AssignerA_Alert, {value} ) end,
    activations =
    {
        { "ACT_Mission_Automate_ControleCreation_EnCours", { "done_ACT_Mission_Automate_ControleCreation_EnCours" } },
        { "ACT_Mission_Automate_ControleCreation_NOK", { "done_ACT_Mission_Automate_ControleCreation_NOK" } },
        { "ACT_Mission_Automate_ControleCreation_OK", { "done_ACT_Mission_Automate_ControleCreation_OK" } },
        { "ACT_Mission_Automate_Emergency_AssignerA_Alert", { "done_ACT_Mission_Automate_Emergency_AssignerA_Alert" } },
    },

    create = function( self )
        self._namedParams = {}
        self._namedParams.ePhase = self.params[1]
        self._namedParams.pPion = self.params[2]
        self._namedParams.locations = self.params[3]
    end,

    activate = function( self )
        local Activate = Activate
        self.eActionCreation = self.eActionCreation or eActionEnCours
        local rForce = 1 / GetActivity()
         do
            local _continue = true
            local switch_1 = self.eActionCreation
            local cases_switch_1 = {}
                if switch_1 == eActionEnCours then
                    Activate( self.activations.ACT_Mission_Automate_ControleCreation_EnCours, rForce, emptyTable )
                    _continue = false
                                cases_switch_1[1] = true
elseif switch_1 == eActionHalt
                or switch_1 == eActionImpossible then
                    Activate( self.activations.ACT_Mission_Automate_ControleCreation_NOK, rForce, emptyTable )
                                        do return end

                                end
                if cases_switch_1[2] or switch_1 == eActionEffectuee then
                    Activate( self.activations.ACT_Mission_Automate_ControleCreation_OK, -rForce, emptyTable )
                                        do return end

                                end
            end

        Activate( self.activations.ACT_Mission_Automate_Emergency_AssignerA_Alert, rForce, { self._namedParams.ePhase, self._namedParams.pPion, self._namedParams.locations, } )
self.done_ACT_Mission_Automate_Emergency_AssignerA_Alert = function( self, _, v ) self.eActionCreation = v[1] end
    end,

}

connections = connections or {}
connections[ #connections + 1 ] = { nodes.BEH_Mission_Automate_Emergency_AssignerA_Alert, "ACT_Mission_Automate_ControleCreation_EnCours", nodes.ACT_Mission_Automate_ControleCreation_EnCours }
connections[ #connections + 1 ] = { nodes.BEH_Mission_Automate_Emergency_AssignerA_Alert, "ACT_Mission_Automate_ControleCreation_NOK", nodes.ACT_Mission_Automate_ControleCreation_NOK }
connections[ #connections + 1 ] = { nodes.BEH_Mission_Automate_Emergency_AssignerA_Alert, "ACT_Mission_Automate_ControleCreation_OK", nodes.ACT_Mission_Automate_ControleCreation_OK }
connections[ #connections + 1 ] = { nodes.BEH_Mission_Automate_Emergency_AssignerA_Alert, "ACT_Mission_Automate_Emergency_AssignerA_Alert", nodes.ACT_Mission_Automate_Emergency_AssignerA_Alert }
connections[ #connections + 1 ] = { nodes.BEH_Mission_Automate_Emergency_AssignerA_EvacuateArea, "ACT_Mission_Automate_ControleCreation_EnCours", nodes.ACT_Mission_Automate_ControleCreation_EnCours }
connections[ #connections + 1 ] = { nodes.BEH_Mission_Automate_Emergency_AssignerA_EvacuateArea, "ACT_Mission_Automate_ControleCreation_NOK", nodes.ACT_Mission_Automate_ControleCreation_NOK }
connections[ #connections + 1 ] = { nodes.BEH_Mission_Automate_Emergency_AssignerA_EvacuateArea, "ACT_Mission_Automate_ControleCreation_OK", nodes.ACT_Mission_Automate_ControleCreation_OK }
connections[ #connections + 1 ] = { nodes.BEH_Mission_Automate_Emergency_AssignerA_EvacuateArea, "ACT_Mission_Automate_Emergency_AssignerA_EvacuateArea", nodes.ACT_Mission_Automate_Emergency_AssignerA_EvacuateArea }
