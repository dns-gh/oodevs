<?xml version="1.0" encoding="UTF-8"?>
<task xmlns="http://www.masagroup.net/directia/schemas/bm" name="agent.tasks.Ambush" source-version="1.0.0" knowledge-class="agent.tasks.knowledges.Ambush">
    <description>    Mission spécifique pour un pion contenant un sniper. L'embuscade consiste à se déplacer de position de tir en position de tir, pour harceler les ennemis à distance de tir.

    Pour éviter d'être détecter chacune des positions ne servent qu'une seule fois. Quand toutes les positions de tirs ont été utilisé par le sniper, celui rejoint la position de regroupement passée en paramètre.</description>
    <parameters>
        <parameter name="positions">
            <description>Les positions de tirs pour l'embuscade.</description>
            <type>
                <list>
                    <class name="properties.Destroying"/>
                </list>
            </type>
        </parameter>
        <parameter name="meetingPoint">
            <description>Le point de regroupement à rejoindre en fin de mission.</description>
            <type>
                <class name="properties.Positionable"/>
            </type>
        </parameter>
    </parameters>
    <goal>
        <description>Phase de harcellement sur les positions de tir. Le but n'est pas la destruction de l'ennemi (un sniper n'a pas les capacités de destruction d'une ou plusieurs sections).</description>
    </goal>
    <stages>
        <stage label="Déplacement vers les positions de tirs">
            <description>Déplacement et observation vers la direction dangereuse ou direction d'ennemi.</description>
            <goal>
                <description>Engagement ponctuel des ennemies sur les positions passées en paramètre.</description>
            </goal>
            <skills>
                <skill name="agent.skills.Snipe" main="true">
                    <parameter name="positions">
                        <value>
                            <parameter>positions</parameter>
                        </value>
                    </parameter>
                </skill>
            </skills>
        </stage>
        <stage label="Repli vers la position de regroupement">
            <description>Déplacement vers le point de regroupement</description>
            <goal>
                <description>Faire mouvement et se poster sur la position de regroupement.</description>
            </goal>
            <skills>
                <skill name="agent.skills.MoveToward" main="true">
                    <parameter name="entities">
                        <value>
                            <list>
                                <parameter>meetingPoint</parameter>
                            </list>
                        </value>
                    </parameter>
                </skill>
            </skills>
        </stage>
    </stages>
</task>