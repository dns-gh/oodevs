-- set echelon for elements in bestUnits
-- @params bestUnits : list of element
-- @params echelon
-- @author LMT
-- @release 2011-01-13
local function setEchelon ( bestUnits, echelon )
    for _, elem in pairs (bestUnits) do
        F_Pion_SeteEtatEchelon( elem.entity.source, echelon )
    end
end

rootnode {

create = function (self )
    local tasks = explode( ";", self.params.tasks )
    if self.params.SE and next(self.params.SE ) then
        local bestUnits = findBests( self.params.SE, tasks , self.params.companyTask, self.params.parameters, #self.params.SE )
        setEchelon( bestUnits, eEtatEchelon_Second )
        for _, elem in pairs( bestUnits ) do
            meKnowledge:sendTaskToPion( elem.entity, elem.taskName, elem.params, eEtatEchelon_Second ) -- Send the task to the unit
        end
    end
end,

}