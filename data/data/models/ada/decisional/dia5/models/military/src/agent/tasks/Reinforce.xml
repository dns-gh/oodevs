<?xml version="1.0" encoding="UTF-8"?>
<task xmlns="http://www.masagroup.net/directia/schemas/bm" name="agent.tasks.Reinforce" source-version="1.0.0" knowledge-class="agent.tasks.knowledges.Reinforce">
	<parameters>
		<parameter name="objective">
			<description>L'éléments à renforcer.</description>
			<type>
				<class name="world_concepts.Reinforcable"/>
				<class name="world_concepts.Supportable"/>
			</type>
		</parameter>
		<parameter name="positions" nullable="true">
			<description>Les positions de renforcement.</description>
			<type>
				<list>
					<class name="world_concepts.Reinforcing"/>
				</list>
			</type>
			<default>
				<nil/>
			</default>
		</parameter>
	</parameters>
	<stages>
		<stage label="Renforcer" permanent="true">
			<let name="enemiesInRange">
				<value>
					<call method="queries_enemies.getEnemiesToSupport">
						<parameter name="elementsToSupport">
							<value>
								<list>
									<parameter>objective</parameter>
								</list>
							</value>
						</parameter>
					</call>
				</value>
			</let>
			<skills>
				<skill name="agent.skills.primitives.Reinforce" priority="0.7">
					<parameter name="entity">
						<value>
							<parameter>objective</parameter>
						</value>
					</parameter>
					<parameter name="positions">
						<value>
							<parameter>positions</parameter>
						</value>
					</parameter>
				</skill>
				<skill name="agent.skills.Engage" priority="0.3">
					<parameter name="entities">
						<value>
							<parameter>enemiesInRange</parameter>
						</value>
					</parameter>
					<parameter name="positions">
						<value>
							<parameter>positions</parameter>
						</value>
					</parameter>
				</skill>
			</skills>
		</stage>
	</stages>
</task>