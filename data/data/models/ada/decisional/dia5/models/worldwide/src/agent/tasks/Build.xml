<?xml version="1.0" encoding="UTF-8"?>
<task xmlns="http://www.masagroup.net/directia/schemas/bm" name="agent.tasks.Build" source-version="1.0.0" knowledge-class="agent.tasks.knowledges.Build">
    <description>To construct something (any of the sword objects) </description>
    <parameters>
        <parameter name="entities">
            <description>The objects to build.</description>
            <type>
                <list>
                    <class name="properties.Buildable"/>
                </list>
            </type>
        </parameter>
        <parameter name="meetingPoint" nullable="true">
            <description>The position to reach once all objects have been built.</description>
            <type>
                <class name="properties.Reachable"/>
            </type>
        </parameter>
        <parameter name="withImprovement" nullable="true">
            <description>Define if the object can be improved with mines. If the mission is used to erect obstacles (engineer units), the agents can improve the objects (barricade for instance) with mines. By default, the value is 'false'.</description>
            <type>
                <simple name="boolean"/>
            </type>
            <default>
                <boolean>false</boolean>
            </default>
        </parameter>
    </parameters>
    <goal>
        <description>To build a set of sword objects.</description>
    </goal>
    <stages>
        <stage label="moving to build objects">
            <skills>
                <skill name="agent.skills.BuildWithReinforcement" main="true">
                    <parameter name="entities">
                        <value>
                            <parameter>entities</parameter>
                        </value>
                    </parameter>
                    <parameter name="withImprovement">
                        <value>
                            <parameter>withImprovement</parameter>
                        </value>
                    </parameter>
                </skill>
            </skills>
        </stage>
        <stage label="moving to meeting position" disable-when-done="true">
            <skills>
                <skill name="agent.skills.MoveToward" main="true">
                    <parameter name="entities">
                        <value>
                            <list>
                                <parameter>meetingPoint</parameter>
                            </list>
                        </value>
                    </parameter>
                </skill>
            </skills>
        </stage>
    </stages>
</task>