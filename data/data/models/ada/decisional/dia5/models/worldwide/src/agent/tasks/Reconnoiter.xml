<?xml version="1.0" encoding="UTF-8"?>
<task xmlns="http://www.masagroup.net/directia/schemas/bm" name="agent.tasks.Reconnoiter" source-version="1.0.0" knowledge-class="agent.tasks.knowledges.Reconnoiter">
    <description>For the agent to reconnoiter the objectives in order to collect information on terrain and detect enemies.&#xD;
This mission is an offensive reconnaissance of the issued objective. The objective are ordered by user. The agent moves to each of the objectives (in the order of the list) and reconnoiter them. If the &quot;searchObjectives&quot; parameter is set to 'true', the agent takes time to search the objectives (the delay grows but the probability to find hidden units increases).&#xD;
</description>
    <parameters>
        <parameter name="objectives">
            <description>The objective to reconnoiter.</description>
            <type>
                <list>
                    <class name="properties.Reconnoitrable"/>
                    <class name="properties.Reconnoitring"/>
                </list>
            </type>
        </parameter>
        <parameter name="searchObjectives">
            <description>Define if the agent needs to search the objectives (searching objective allow the agent to fin hidden terrorists or milicians for instance).</description>
            <type>
                <simple name="boolean"/>
            </type>
            <default>
                <boolean>false</boolean>
            </default>
        </parameter>
    </parameters>
    <goal>
        <description>To reconnoiter each of the objectives in order to collect information on terrain and detect enemies.</description>
    </goal>
    <stages>
        <stage label="move to objectives" disable-when-done="true">
            <let name="enemiesInRange">
                <value>
                    <call method="queries.getEnemiesInRange">
                        <parameter name="probabilityToHit">
                            <value>
                                <number>0.5</number>
                            </value>
                        </parameter>
                    </call>
                </value>
            </let>
            <skills>
                <skill name="agent.skills.ReconnoiterRoute" main="true" priority="0.9">
                    <parameter name="entities">
                        <value>
                            <parameter>objectives</parameter>
                        </value>
                    </parameter>
                    <parameter name="positions">
                        <value>
                            <parameter>objectives</parameter>
                        </value>
                    </parameter>
                    <parameter name="searchObjectives">
                        <value>
                            <parameter>searchObjectives</parameter>
                        </value>
                    </parameter>
                </skill>
                <skill name="agent.skills.Engage" priority="0.1">
                    <parameter name="entities">
                        <value>
                            <parameter>enemiesInRange</parameter>
                        </value>
                    </parameter>
                    <parameter name="positions">
                        <value>
                            <call method="queries.getPositionsToDestroy">
                                <parameter name="elementsToDestroy">
                                    <value>
                                        <parameter>enemiesInRange</parameter>
                                    </value>
                                </parameter>
                            </call>
                        </value>
                    </parameter>
                </skill>
            </skills>
        </stage>
    </stages>
</task>