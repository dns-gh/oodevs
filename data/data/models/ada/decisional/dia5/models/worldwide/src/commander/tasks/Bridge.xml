<?xml version="1.0" encoding="UTF-8"?>
<task xmlns="http://www.masagroup.net/directia/schemas/bm" name="commander.tasks.Bridge" source-version="1.0.0" knowledge-class="commander.tasks.knowledges.Bridge">
    <description>For the commander agent, to order subordinates units to bridge in order to make friend units cross a water obstacle. The mission execution defines two stages: first one is the reconnaissance of the crossing sites. Once it is done, the commander starts the second one by issuing the &quot;Bridge&quot; mission with the crossing sites as parameters.&#xD;
Only engineer units work for that mission. Other units reach the meeting position.</description>
    <parameters>
        <parameter name="crossingSites">
            <description>The crossing sites to be bridge.</description>
            <type>
                <list>
                    <class name="world.Object"/>
                </list>
            </type>
        </parameter>
        <parameter name="bridgeSystem">
            <description>Ths bridge system to use (continuously or discontinuously).</description>
            <type>
                <simple name="numeric"/>
            </type>
        </parameter>
        <parameter name="meetingPoint">
            <description>The meeting position to be reached by units at the end of the mission (or at the begining of the mission for non-engineer units).</description>
            <type>
                <class name="world.Point"/>
            </type>
        </parameter>
    </parameters>
    <stages>
        <stage label="moving to reconnoiter crossing sites">
            <skills>
                <skill name="commander.skills.Lead" main="true">
                    <parameter name="companyTask">
                        <value>
                            <string>commander.tasks.Bridge</string>
                        </value>
                    </parameter>
                    <parameter name="mainTasks">
                        <value>
                            <string>agent.tasks.ReconnoitreACrossingSite</string>
                        </value>
                    </parameter>
                    <parameter name="supportTasks">
                        <value>
                            <string>agent.tasks.Reinforce</string>
                        </value>
                    </parameter>
                    <parameter name="taskForSupporting">
                        <value>
                            <string>agent.tasks.Reinforce</string>
                        </value>
                    </parameter>
                    <parameter name="defaultTask">
                        <value>
                            <string>agent.tasks.Follow</string>
                        </value>
                    </parameter>
                    <parameter name="disableWhenDone">
                        <value>
                            <boolean>true</boolean>
                        </value>
                    </parameter>
                </skill>
            </skills>
        </stage>
        <stage label="bridge contruction">
            <skills>
                <skill name="commander.skills.LeadGEN" main="true">
                    <parameter name="companyTask">
                        <value>
                            <string>commander.tasks.Bridge</string>
                        </value>
                    </parameter>
                    <parameter name="mainTasks">
                        <value>
                            <string>agent.tasks.Bridge</string>
                        </value>
                    </parameter>
                    <parameter name="supportTasks">
                        <value>
                            <string>agent.tasks.Reinforce</string>
                        </value>
                    </parameter>
                    <parameter name="taskForSupporting">
                        <value>
                            <string>agent.tasks.Reinforce</string>
                        </value>
                    </parameter>
                    <parameter name="defaultTask">
                        <value>
                            <string>agent.tasks.MoveAlong</string>
                        </value>
                    </parameter>
                </skill>
            </skills>
        </stage>
    </stages>
</task>