-- **************************************************************************** 
-- Patrol
-- Uses the primitive skill "moveToward" on each objectives. 
-- ****************************************************************************
rootnode
{
    connections = { skill.links.moveAlong },

    -- -------------------------------------------------------------------------------- 
    -- Move along is done (all entities have been reached)
    -- --------------------------------------------------------------------------------
    done = function( self )
        self.firstMoveIsDone = true
    end,

    -- -------------------------------------------------------------------------------- 
    -- Init
    -- --------------------------------------------------------------------------------
    create = function( self )
        self.firstMoveIsDone = false
    end,

    -- -------------------------------------------------------------------------------- 
    -- Move along the entities.
    -- --------------------------------------------------------------------------------
    activate = function( self )
        local Activate = Activate
        if not self.firstMoveIsDone then
            Activate( skill.links.moveAlong,1, { entities = self.params.entities, 
              goToNextTargetAfterInstallation = self.params.goToNextTargetAfterInstallation } )
        else
            self:create() -- start the behavior one more time and so on...
        end
    end
}