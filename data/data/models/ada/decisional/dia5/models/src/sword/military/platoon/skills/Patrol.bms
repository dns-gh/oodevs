-- **************************************************************************** 
-- Patrol
-- Uses the primitive skill "moveToward" on each objectives. 
-- ****************************************************************************
rootnode
{
    connections = { skill.links.moveAlong },

    -- -------------------------------------------------------------------------------- 
    -- Once first element is reached, get the next one by incrementing iterator.
    -- --------------------------------------------------------------------------------
    done = function( self, params )
        self.firstMoveIsDone = true
    end,

    -- -------------------------------------------------------------------------------- 
    -- Init
    -- First time the instance is created, activate the skill MoveAlong with entities to
    -- reach as parameters.
    -- --------------------------------------------------------------------------------
    create = function( self )
        self.firstMoveIsDone = false
    end,

    -- -------------------------------------------------------------------------------- 
    -- Move along the entities.
    -- --------------------------------------------------------------------------------
    activate = function( self )
        local Activate = Activate
        if not self.firstMoveIsDone then
            Activate( skill.links.moveAlong,1, { entities  = self.params.entities } )
        else
            self:create() -- start the behavior one more time and so on...
        end
    end
}
