<?xml version="1.0" encoding="UTF-8"?>
<task xmlns="http://www.masagroup.net/directia/schemas/bm" name="sword.military.company.combat.tasks.Relieve" source-version="1.0.0" knowledge-class="sword.military.company.tasks.knowledges.RelieveEffect">
  <parameters>
    <parameter name="objective">
      <type>
        <class name="sword.military.world.Company"/>
      </type>
    </parameter>
    <parameter name="followTask">
      <description>La mission que l'on donne par défaut aux pions relevés afin qu'ils suivent l'autoamte qui l'a relevé.</description>
      <type>
        <simple name="string"/>
      </type>
    </parameter>
  </parameters>
  <stages>
    <stage label="Relève" disable-when-done="true">
      <skills>
        <skill name="sword.military.company.skills.Relieve" main="true">
          <parameter name="objectives">
            <value>
              <call method="sword.military.company.queries.getEntitiesFromAutomat">
                <parameter name="role">
                  <value>
                    <string>none</string>
                  </value>
                </parameter>
                <parameter name="withPC">
                  <value>
                    <boolean>true</boolean>
                  </value>
                </parameter>
                <parameter name="automat">
                  <value>
                    <parameter>objective</parameter>
                  </value>
                </parameter>
              </call>
            </value>
          </parameter>
          <parameter name="automateParameters">
            <value>
              <call method="sword.military.company.queries.getTaskParameters"/>
            </value>
          </parameter>
          <parameter name="commandingEntities">
            <value>
              <call method="sword.military.company.queries.getCommanding">
                <parameter name="role">
                  <value>
                    <string>none</string>
                  </value>
                </parameter>
                <parameter name="withPC">
                  <value>
                    <boolean>true</boolean>
                  </value>
                </parameter>
              </call>
            </value>
          </parameter>
          <parameter name="objective">
            <value>
              <parameter>objective</parameter>
            </value>
          </parameter>
          <parameter name="followTask">
            <value>
              <parameter>followTask</parameter>
            </value>
          </parameter>
        </skill>
      </skills>
    </stage>
  </stages>
</task>