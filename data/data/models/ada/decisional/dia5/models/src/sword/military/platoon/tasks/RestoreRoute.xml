<?xml version="1.0" encoding="UTF-8"?>
<task xmlns="http://www.masagroup.net/directia/schemas/bm" name="sword.military.platoon.tasks.RestoreRoute" source-version="1.0.0" knowledge-class="sword.military.platoon.tasks.knowledges.OpenRoute">
	<description>Rétablir un itinéraire en dégageant les obstacles</description>
	<parameters>
		<parameter name="objectives">
			<description>L'itinéraire est défini par une liste de point de passage obligé.</description>
			<type>
				<list>
					<class name="sword.military.knowledge.decisional.Reachable"/>
				</list>
			</type>
		</parameter>
	</parameters>
	<goal>
		<description>Rétablir un itinéraire en dégageant les obstacles se trouvant sur l'itinéraire</description>
	</goal>
	<stages>
		<stage label="Retablir itineraire" disable-when-done="true">
			<description>Dégager les obstacles de l'itinéraire</description>
			<goal>
				<description>Rétablir l'itinéraire en dégagent les obstacles</description>
			</goal>
			<let name="obstacles">
				<value>
					<call method="sword.military.queries.objects.getObstaclesOnPath"/>
				</value>
			</let>
			<skills>
				<skill name="sword.military.platoon.skills.MoveAlong" main="true" priority="0.1">
					<parameter name="entities">
						<value>
							<parameter>objectives</parameter>
						</value>
					</parameter>
					<parameter name="avoidObstacles">
						<value>
							<boolean>false</boolean>
						</value>
					</parameter>
				</skill>
				<skill name="sword.military.platoon.skills.RemoveWithReinforcement" priority="0.9">
					<parameter name="obstacles">
						<value>
							<parameter>obstacles</parameter>
						</value>
					</parameter>
				</skill>
			</skills>
		</stage>
	</stages>
</task>