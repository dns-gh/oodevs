-- **************************************************************************** 
-- Dissimulate unit.
-- self.params.reachable: where dissimulate
-- ****************************************************************************
rootnode 
{
    connections = { skill.links.moveToward },

    done = function( self ) end,

    activate = function( self )
        local Activate = Activate
        -- if dissimulate in a crowd, go to the head
        if masalife.brain.core.class.isOfType( self.params.reachable, sword.military.world.Crowd )then
            self.destination = self.params.reachable:getHeadPosition()
        else
            self.destination = self.destination or self.params.reachable:getMyPosition()
        end
        Activate( skill.links.moveToward, 1, { entities = { self.destination } } )
    end,

    destroy = function( self )
        self.destination = nil
    end,

}