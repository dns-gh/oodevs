rootnode
{
    connections = { skill.links.moveToward, skill.nodes.Report, skill.nodes.WaitTransport },
    
    done = function( self )
        self.arrived = true
    end,
    
    unloaded = function( self ) 
        if self.hasBeenLoaded then
          Feedback( self.feedbacks.done )
        end
    end,
    
    loaded = function( self ) 
        self.hasBeenLoaded = true
    end,
           
    create = function( self )
        self.arrived = false
        self.hasBeenLoaded = false
    end,
    
    activate = function( self )
        local Activate = Activate
        local emptyTable = emptyTable
        
        if self.arrived then
            Activate( skill.nodes.Report, 1, { RC = eRC_EnAttenteTransporteurs } )
            Activate( skill.nodes.WaitTransport, 1, emptyTable )
        end
        Activate( skill.links.moveToward, 1, { entities = { self.params.position } } )
    end,
}

node "Report"
{
    create = function( self )
        meKnowledge:RC( self.params.RC )
    end,
}

node "WaitTransport"
{
    feedbacks = { "loaded", "unloaded" },
    
    activate = function( self )
        if meKnowledge:isLoaded() then
            Feedback( self.feedbacks.loaded )
        else
            Feedback( self.feedbacks.unloaded )
        end
    end,
}