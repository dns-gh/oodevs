-- **************************************************************************** 
-- Harass
-- $$$ MIA : A revoir. Virer les fonctions DEC et les isOfType.
-- ****************************************************************************
rootnode
{
    connections = { skill.links.moveToward, skill.nodes.Control },
    
    -- Le pion est arrivé à sa destination
    done = function( self, params, additionalParams )
        self.arrived = true
    end,

    create = function ( self )
        self.arrived = false
    end,
    
    activate = function ( self )
      local Activate = Activate
      if self.arrived then
        Activate( skill.nodes.Control, 1, { entity  = self.params.interceptionObjective } )
      end
      Activate( skill.links.moveToward, 1, {entities = self.params.destroyingPositions} )
      self.arrived = false
    end,
}

-- **************************************************************************** 
-- Simple action of controling an element
-- **************************************************************************** 
node "Control"
{
    select = function( self )
        self.params.entity:controlIt() 
    end
}