<?xml version="1.0" encoding="UTF-8"?>
<task xmlns="http://www.masagroup.net/directia/schemas/bm" name="sword.military.platoon.coercition.tasks.Reconnoiter" source-version="1.0.0" knowledge-class="sword.military.platoon.coercition.tasks.knowledges.Reconnoiter">
	<description>&#xD;
        Reconnaitre les objectifs de proche en proche.  Cette mission est une mission de reconnaissance offensive, pour les agents de combat. Elle apport des informations d'ordre tactique et non technique.&#xD;
    Il s'agit de la reconnaissance d'éléments terrain désignés en paramètre. La détection/identification des ennemis et divers obstacles sera la conséquence des actions de reconnaissance de ces éléments (point, BU, zone) mais également (effet implicite) de la détection de l'agent pendant la progression tactique vers les objectifs.&#xD;
    Cette mission ne présupose pas d'une quelconque axe de progression. &#xD;
    </description>
	<parameters>
		<parameter name="objectives">
			<description>Les objectifs à reconnaitre.</description>
			<type>
				<list>
					<class name="sword.military.knowledge.decisional.Reconnoitrable"/>
					<class name="sword.military.knowledge.decisional.Reconnoitring"/>
				</list>
			</type>
		</parameter>
	</parameters>
	<goal>
		<description>Se déplacer tactiquement vers les éléments et les reconnaître.</description>
	</goal>
	<stages>
		<stage label="Reconnaissance" disable-when-done="true">
			<description>Mouvement tactique et reonnaissance des objectifs. Détection des ennemis, prise de contact si possible.</description>
			<goal>
				<description>Obtenir des informations sur les objectifs avec agressivité.</description>
			</goal>
			<let name="entitiesToEngage">
				<value>
					<call method="sword.military.queries.enemies.getEnemiesInRange">
						<parameter name="probabilityToHit">
							<value>
								<number>0.7</number>
							</value>
						</parameter>
					</call>
				</value>
			</let>
			<skills>
				<skill name="sword.military.platoon.coercition.skills.primitives.Reconnoitre" main="true" priority="0.9">
					<parameter name="entities">
						<value>
							<parameter>objectives</parameter>
						</value>
					</parameter>
					<parameter name="positions">
						<value>
							<parameter>objectives</parameter>
						</value>
					</parameter>
				</skill>
				<skill name="sword.military.platoon.coercition.skills.Engage" priority="0.1">
					<parameter name="entities">
						<value>
							<parameter>entitiesToEngage</parameter>
						</value>
					</parameter>
					<parameter name="positions">
						<value>
							<call method="sword.military.queries.tactical.getPositionsToDestroy">
								<parameter name="elementsToDestroy">
									<value>
										<parameter>entitiesToEngage</parameter>
									</value>
								</parameter>
							</call>
						</value>
					</parameter>
				</skill>
			</skills>
		</stage>
	</stages>
</task>