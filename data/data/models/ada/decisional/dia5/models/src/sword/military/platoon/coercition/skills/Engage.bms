-- ****************************************************************************
-- Engage elements.
-- self.params.entities: the detroyable/neutralizable elements
-- self.params.positions: the detroying/neutralizing elements
-- ****************************************************************************
rootnode
{
    connections = { skill.links.destroy, skill.links.neutralize },

    -- --------------------------------------------------------------------------------
    -- Main effect is reached: send feedback when entities
    -- --------------------------------------------------------------------------------
    done = function( self ) Feedback( self.feedbacks.done ) end,

    -- --------------------------------------------------------------------------------
    -- Regarding to the effect defined, engage entities to destroy them or neutralize
    -- them.
    -- --------------------------------------------------------------------------------
    activate = function( self )
        local Activate = Activate
        myself.speedModulation.escort = 1 -- if escort, unit should move to engage enemy
        if skill.modifiers.effect == "destroy" then
            Activate( skill.links.destroy, 1, { entities = self.params.entities, positions = self.params.positions } )
        else -- neutralize
            Activate( skill.links.neutralize, 1, { entities = self.params.entities, positions = self.params.positions } )
        end
    end
}
