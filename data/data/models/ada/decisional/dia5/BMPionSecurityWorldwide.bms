pragma "once"
--@TODO mutualiser les parties indépendantes  du modèle
LoadResourcesFile( "Integration.lua" )
include "FragOrder.lua"


local libPath = select(1,...)
local role    = select(2,...)
masalife.brain.core.loadModel( role, { libPath .. "/models/directia.core/directia.core.bml", 
                                       libPath .. "/models/common/src", 
                                       libPath .. "/models/security/src" } )
                                       
integration.ontology = 
{
    types = 
{
        body            = agent.ontology.classes.MeKnowledge,
        point           = agent.ontology.classes.Position,
        area            = agent.ontology.classes.Area,
        urbanBlock      = agent.ontology.classes.UrbanBlock,
        population      = agent.ontology.classes.Crowd,
        object          = agent.ontology.classes.Object,
        agent           = agent.ontology.classes.Teammate,
        agentKnowledge  = agent.ontology.classes.NonTeammate,
        resourceNetwork = agent.ontology.classes.ResourceNode,
        genObject       = agent.ontology.classes.PlannedWork,

        --- Type exists only the test library, the CRTaskListener crashs if this knowledge does not exists
        automat = agent.ontology.classes.Company,
        }
}

local swordErrorHandler = function( err )
    DEC_Trace( tostring( err )..debug.traceback() )
end

errorhandlermanager.installErrorHandler( swordErrorHandler )