// *****************************************************************************
// globals
// *****************************************************************************

include "Common/Moteur/Functions/Pions.hal";
include "Common/Moteur/EngineReports.hal";

float gTest = 1;
    
signatures
{
}

functions
{
    string S_TypeObject_ToString( E_TypeObject type )
    {
        switch( type )
        {
        case eTypeObjectBouchonMines: { S_TypeObject_ToString = "bouchon mines"; return; }
        case eTypeObjectZoneMineeLineaire: { S_TypeObject_ToString = "zone minee lineaire"; return; }
        case eTypeObjectZoneMineeParDispersion: { S_TypeObject_ToString = "zone minee dispersion"; return; }
        case eTypeObjectFosseAntiChar: { S_TypeObject_ToString = "fosse antichar"; return; }
        case eTypeObjectAbatti: { S_TypeObject_ToString = "abattis"; return; }
        case eTypeObjectBarricade: { S_TypeObject_ToString = "barricade"; return; }
        case eTypeObjectEboulement: { S_TypeObject_ToString = "eboulement"; return; }
        case eTypeObjectDestructionRoute: { S_TypeObject_ToString = "destruction route"; return; }
        case eTypeObjectDestructionPont: { S_TypeObject_ToString = "destruction pont"; return; }
        case eTypeObjectPontFlottantContinu: { S_TypeObject_ToString = "pont flottant"; return; }
        case eTypeObjectPosteTir: { S_TypeObject_ToString = "poste tir"; return; }
        case eTypeObjectZoneProtegee: { S_TypeObject_ToString = "zone protegee"; return; }
        case eTypeObjectZoneImplantationCanon: { S_TypeObject_ToString = "zone implantation canon"; return; }
        case eTypeObjectZoneImplantationCOBRA: { S_TypeObject_ToString = "zone implantation cobra"; return; }
        case eTypeObjectZoneImplantationMortier: { S_TypeObject_ToString = "zone implantation mortier"; return; } 
        case eTypeObjectZoneImplantationLRM: { S_TypeObject_ToString = "zone implantation lrm"; return; }
        case eTypeObjectSiteFranchissement: { S_TypeObject_ToString = "site franchissement"; return; }      
        case eTypeObjectNuageNBC: { S_TypeObject_ToString = "nuage nbc"; return; }                   
        case eTypeObjectPlotRavitaillement: { S_TypeObject_ToString = "plot ravittaillement"; return; }      
        case eTypeObjectSiteDecontamination: { S_TypeObject_ToString = "site decontamination"; return; }
        case eTypeObjectZoneBrouillageBrod: { S_TypeObject_ToString = "zone brouillage brod"; return; }
        case eTypeObjectZoneBrouillageBromure: { S_TypeObject_ToString = "zone brouillage bromure"; return; }
        case eTypeObjectRota: { S_TypeObject_ToString = "site rota"; return; }
        case eTypeObjectZoneNBC: { S_TypeObject_ToString = "zone nbc"; return; }
        case eTypeObjectAirePoser: { S_TypeObject_ToString = "aire poser"; return; }               
        case eTypeObjectPiste: { S_TypeObject_ToString = "piste"; return; }                   
        case eTypeObjectPlateForme: { S_TypeObject_ToString = "plateforme"; return; }              
        case eTypeObjectZoneMobiliteAmelioree: { S_TypeObject_ToString = "zone mobilite amelioree"; return; }
        case eTypeObjectZonePoserHelicoptere: { S_TypeObject_ToString = "zone poser helicoptere"; return; }
        case eTypeObjectAireLogistique: { S_TypeObject_ToString = "aire logistique"; return; }
        case eTypeObjectItineraireLogistique: { S_TypeObject_ToString = "itineraire logistique"; return; }    
        case eTypeObjectCampPrisonniers: { S_TypeObject_ToString = "camp prisonniers"; return; }
        case eTypeObjectCampRefugies: { S_TypeObject_ToString = "camp refugies"; return; }
        case eTypeObjectPosteControle: { S_TypeObject_ToString = "poste controle"; return; }           
        case eTypeObjectTerrainLargage: { S_TypeObject_ToString = "terrain largage"; return; }          
        case eTypeObjectZoneInterditeDeplacement: { S_TypeObject_ToString = "zone interdite deplacement"; return; }
        case eTypeObjectZoneInterditeTir: { S_TypeObject_ToString = "zone interdite tir"; return; }        
        case eTypeObjectPontFlottantDiscontinu: { S_TypeObject_ToString = "bouchon mines"; return; }  
        case eTypeObjectInstallation: { S_TypeObject_ToString = "installation"; return; }        
        }
    }
    
    T_ListeConnaissancesAgent S_ConnaissancesEnnemiesVivantesPercuesVolantes()
    {
        DIA_Clear( S_ConnaissancesEnnemiesVivantesPercuesVolantes );
    
        T_ListeConnaissancesAgent listeUnitesEnnemiesVivantesPercues = DEC_Connaissances_UnitesEnnemiesVivantesPercues();
        with( x in listeUnitesEnnemiesVivantesPercues )
            DEC_UserTypeList_PushBack( S_ConnaissancesEnnemiesVivantesPercuesVolantes, x );
    }

    //-------------------------------------------------------------------------
    // Calcul d'une force entre 1 et 2 par rapport à la distance à un eni.
    //-------------------------------------------------------------------------
    float S_Connaissance_ForceDistance( T_ConnaissanceAgent ksA )
    {
        E_ValiditeRequete	eValidite = eRequeteInvalide;
        T_Point 			positionA;
        
        positionA = DEC_ConnaissanceAgent_Position( ksA, eValidite );       
        if( eValidite == eRequeteInvalide )
        {        
        	S_Connaissance_ForceDistance = 0;
            return;
        }
 
        S_Connaissance_ForceDistance = 1;
    } 
    
    float S_Connaissance_ForceDistance2( float prout, T_Point point )
    {
        S_Connaissance_ForceDistance2 = 1;
    }



    //-------------------------------------------------------------------------
    // Fonction appellée lorsque un ordre de conduite a été séléctionné
    // param @strMission     Mission courante
    // param @nOrdreConduite Ordre de conduite
    // param @strHint
    //-------------------------------------------------------------------------
    none EVT_DEC_OrdreConduite( Rep_OrdreConduite ordreConduite )
    {
        DEC_Debug( "EVT_DEC_OrdreConduite" );
    
        // ajout a la liste des ordres recus
        DIA_AddToCategory( "ordres_recus", ordreConduite );
    }

    // *****************************************************************************
    // Ev terrain.
    // *****************************************************************************
    none EVT_DEC_Point( Rep_PointABC rep )
    {
        assert( rep != 0, "EvenementTerrain: rep = 0" );
       // DIA_AddToCategory("points_particuliers",rep);
            
        if( rep.cls_ == ePoint )
        {
            Rep_Point   pt=rep;
            if( pt.eType_ == eTypePointParticulier )
            {
                Rep_PointParticulier ptPart = pt;
			    DEC_Debug( "Rencontre d'un point particulier de type " + EnumToString( ptPart.eTypePart_, E_TypePointParticulier ) );
            }
            else
            {
                DEC_Debug( "Rencontre d'un point de type " + EnumToString( pt.eType_, E_TypePoint ) );
            }
        }
        else if ( rep.cls_ == eAvantPoint )
        {
            Rep_AvantPoint pt = rep;
            Rep_Point      ppt = pt.dest_;
            if( ppt.eType_ == eTypePointParticulier )
            {
                Rep_PointParticulier ptPart = ppt;
                DEC_Debug( "Rencontre d'un avant point pointant sur un point particulier de type " + EnumToString( ptPart.eTypePart_, E_TypePointParticulier ) );
            }
            else
            {
                DEC_Debug( "Rencontre d'un avant point pointant sur un point de type " + EnumToString( ppt.eType_, E_TypePoint ) );
            }
        }
    }
}

//-----------------------------------------------------------------------------
// 
//-----------------------------------------------------------------------------
/*
define M_DumpAvantPoints()
{
    selection listePoints = DIA_GetCategory( "points_interressants" );    
    with ( x in listePoints )
    {
        Rep_PointABC ptABC        = x;

        if( ptABC.cls_ == ePoint )
        {
            Rep_Point   pt = ptABC;
            if( pt.eType_ == eTypePointParticulier )
            {
                Rep_PointParticulier ptPart = pt;
			    DEC_Trace( "", "Rencontre d'un point particulier de type " + EnumToString( ptPart.eTypePart_, E_TypePointParticulier ) );
            }
            else if( pt.eType_ == eTypePointLima )
            {
                Rep_PointLima ptLima = pt;
                DEC_Trace( "", "Rencontre d'un point sur lima de type " + EnumToString( ptLima.nTypeLima_, E_TypeLima ) );

                bool bFlag = DEC_GetMissionLimaFlag( ptLima.lima_ );
                DEC_Debug( "Valeur flag lima : " + BoolToString( bFlag ) );
                DEC_SetMissionLimaFlag( ptLima.lima_, true );
                bFlag = DEC_GetMissionLimaFlag( ptLima.lima_ );
                DEC_Debug( "Valeur flag lima : " + BoolToString( bFlag ) );
            }
            else
            {
                DEC_Trace( "", "Rencontre d'un point de type " + EnumToString( pt.eType_, E_TypePoint ) );
            }
        }
        else if ( ptABC.cls_ == eAvantPoint )
        {
            Rep_AvantPoint pt  = ptABC;
            Rep_Point      ppt = pt.dest_;
            if( ppt.eType_ == eTypePointParticulier )
            {
                Rep_PointParticulier ptPart = ppt;
                DEC_Trace( "", "Rencontre d'un avant point pointant sur un point particulier de type " + EnumToString( ptPart.eTypePart_, E_TypePointParticulier ) );
            }
            else
            {
                DEC_Trace( "", "Rencontre d'un avant point pointant sur un point de type " + EnumToString( ppt.eType_, E_TypePoint ) );
            }
        }
        DIA_RemoveFromCategory( "points_interressants", ptABC );
    }
}
end_define
*/